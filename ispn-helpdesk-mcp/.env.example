# ISPN Helpdesk Bridge MCP - Environment Configuration
# ===========================================================
# This file documents all environment variables used by the
# ISPN Helpdesk Bridge MCP server. Copy this file to .env
# and update values for your environment.

# === Server Configuration ===
# Port for HTTP API server (default: 3000)
PORT=3000

# Environment mode: development, staging, production
NODE_ENV=development

# Logging level: trace, debug, info, warn, error, fatal
# Use 'info' for production, 'debug' for development
LOG_LEVEL=info

# === Authentication ===
# Shared token authentication for simple HTTP clients
# SECURITY: Change this in production! Use a strong, random value.
# Generate with: openssl rand -hex 32
AUTH_TOKEN=your-secret-token-here-change-in-production

# HMAC signature authentication for webhook security
# Used to validate webhook payloads from trusted sources
# SECURITY: Change this in production! Use a strong, random value.
# Generate with: openssl rand -hex 32
WEBHOOK_SECRET=your-webhook-secret-here-change-in-production

# === Helpdesk API Configuration ===
# Base URL for your helpdesk system's API
# Example: https://yourcompany.zendesk.com/api/v2
HELPDESK_API_URL=https://helpdesk.example.com/api/v1

# API key or token for authenticating with helpdesk system
# Obtain from your helpdesk system's API settings
HELPDESK_API_KEY=your-helpdesk-api-key-here

# === Security Settings ===
# HMAC replay attack prevention window (milliseconds)
# Requests with timestamps outside this window are rejected
# Default: 300000 (5 minutes)
REPLAY_WINDOW_MS=300000

# === Storage Configuration ===
# Ticket cache TTL (hours)
# How long to cache ticket lookups for deduplication
# Default: 4 hours
TICKET_TTL_HOURS=4

# Idempotency cache TTL (minutes)
# How long to cache idempotent request responses
# Default: 15 minutes
IDEMPOTENCY_TTL_MINUTES=15

# === Rate Limiting ===
# Maximum requests per window per client
# Default: 10 requests per second
RATE_LIMIT_MAX=10

# Rate limit window duration (milliseconds)
# Default: 1000 (1 second)
RATE_LIMIT_WINDOW_MS=1000

# ===========================================================
# IMPORTANT SECURITY NOTES
# ===========================================================
# 1. Never commit .env file to version control
#    - Add .env to .gitignore
#    - Use .env.example as template only
#
# 2. Use strong, random values for secrets
#    - AUTH_TOKEN: openssl rand -hex 32
#    - WEBHOOK_SECRET: openssl rand -hex 32
#
# 3. Rotate secrets regularly in production
#    - Update AUTH_TOKEN quarterly
#    - Update WEBHOOK_SECRET after any security incident
#
# 4. Use environment-specific configuration
#    - .env.development (local development)
#    - .env.staging (staging environment)
#    - .env.production (production environment)
#
# 5. Consider using secrets management services
#    - AWS Secrets Manager
#    - HashiCorp Vault
#    - Azure Key Vault
#    - Google Cloud Secret Manager
#
# 6. Restrict access to .env files
#    - chmod 600 .env (read/write for owner only)
#    - Never share .env files via email or chat
#
# 7. Monitor for leaked secrets
#    - Use tools like GitGuardian or TruffleHog
#    - Rotate immediately if secrets are compromised
#
# ===========================================================
# QUICK START
# ===========================================================
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Generate secure secrets:
#    openssl rand -hex 32  # For AUTH_TOKEN
#    openssl rand -hex 32  # For WEBHOOK_SECRET
#
# 3. Update HELPDESK_API_URL and HELPDESK_API_KEY
#    with your actual helpdesk system credentials
#
# 4. Start the servers:
#    npm run dev:http   # HTTP API server
#    npm run dev:mcp    # MCP server
#
# ===========================================================
